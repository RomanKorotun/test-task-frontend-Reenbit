"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[621],{1581:(e,s,a)=>{a.d(s,{A:()=>t});a(5043);const t=a.p+"static/media/sprite.cd76a83c60c2fd83daa87e8071893112.svg"},1621:(e,s,a)=>{a.r(s),a.d(s,{default:()=>ye});var t=a(5043),l=a(5749);const i="header_header__ys5bL",n="header_useContainer__lO6Ni",r="header_btnLogout__8iQeN",c="userMenu_userCard__UFlgo",d="userMenu_img__r+SKE";var h=a(1226),m=a(579);const o=()=>{const{avatar:e,username:s}=(0,h.A)();return(0,m.jsxs)("div",{className:c,children:[e&&(0,m.jsx)("img",{src:e,alt:"avatar",className:d}),(0,m.jsx)("div",{children:s})]})};var _=a(3003),g=a(7580);const N=()=>{const e=(0,_.wA)();return(0,m.jsx)("header",{className:i,children:(0,m.jsxs)("div",{className:n,children:[(0,m.jsx)(o,{}),(0,m.jsx)("button",{className:r,onClick:()=>e((0,g.ri)()),children:"Logout"})]})})},x="chatsList_chatListCard__EBKUx",j="chatsList_headerList__qwiUD",u="chatsList_btnAddChat__864Wh",C="chatsList_filterCard__4hpph",p="chatsList_inputFilter__Ma2Ta",v="chatsList_chatListTitle__T5mxL",f="chatsList_listItem__7xvFz",b="chatsList_listItemActive__eQBr3",A="chatsList_nameDateCard__mSxc0",w="chatsList_namesCard__+F7S9",L="chatsList_img__v9M8Q",S="chatsList_firstName__G6sCE",P="chatsList_lastName__VTRiR",E="chatsList_message__nAMdy",D="chatsList_date__Wshoz";var $=a(2963),T=a.n($);const k="modalAddChat_modalAddChat__mZKXO",M="modalAddChat_inputCustom__9rvZ6",R="modalAddChat_btnSubmit__LmiPR",y="modalAddChat_label__HBoNi",F="modalAddChat_errMsg__hMRNC",O="modalAddChat_btnClose__ZcYwi",Y="modalAddChat_iconClose__2pUDN";var q=a(3892),K=a(1581),V=a(899);const I=V.Ik().shape({firstName:V.Yj().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:V.Yj().min(2,"Too Short!").max(50,"Too Long!").required("Required")});T().setAppElement("#root");const W=e=>{let{isOpen:s,onToggle:a}=e;const t=(0,_.wA)();return(0,m.jsx)(T(),{isOpen:s,onRequestClose:a,contentLabel:"Example Modal",className:k,children:(0,m.jsx)(q.l1,{initialValues:{firstName:"",lastName:""},validationSchema:I,onSubmit:(e,s)=>{t((0,g.S3)(e)),a()},children:(0,m.jsxs)(q.lV,{children:[(0,m.jsxs)("label",{className:y,children:[(0,m.jsx)(q.D0,{name:"firstName",placeholder:"firstName",className:M}),(0,m.jsx)(q.Kw,{component:"div",name:"firstName",className:F})]}),(0,m.jsxs)("label",{className:y,children:[(0,m.jsx)(q.D0,{name:"lastName",placeholder:"lastName",className:M}),(0,m.jsx)(q.Kw,{component:"div",name:"lastName",className:F})]}),(0,m.jsx)("button",{type:"submit",className:R,children:"Add chat"}),(0,m.jsx)("button",{className:O,onClick:a,children:(0,m.jsx)("svg",{className:Y,width:20,height:20,children:(0,m.jsx)("use",{href:`${K.A}#close-icon`})})})]})})})},U=()=>{const[e,s]=(0,t.useState)(""),[a,l]=(0,t.useState)(!1),{chats:i}=(0,h.A)(),n=(0,_.wA)(),r=()=>{l((e=>!e))},c=i.filter((s=>s.firstName.toLowerCase().includes(e.toLowerCase())||s.lastName.toLowerCase().includes(e.toLowerCase())));return(0,m.jsx)(m.Fragment,{children:i.length>0&&(0,m.jsxs)("div",{className:x,children:[(0,m.jsxs)("div",{className:j,children:[(0,m.jsx)("div",{className:v,children:"Chats"}),(0,m.jsx)("button",{className:u,onClick:r,children:"Add new chat"})]}),(0,m.jsx)("div",{className:C,children:(0,m.jsx)("input",{className:p,value:e,onChange:e=>s(e.target.value),placeholder:"Search or start new chat"})}),(0,m.jsx)("ul",{children:c.map((e=>{var s,a,t;const l=null===(s=e.messages[e.messages.length-1])||void 0===s?void 0:s.message,i=l&&l.split("").length>50,r=e.messages[e.messages.length-1];let c=null,d=null,h=null;if(null!==r&&void 0!==r&&r.date){const e=new Date(r.date);c=e.getDate(),d=e.toLocaleString("en-US",{month:"short"}),h=e.getFullYear()}return(0,m.jsxs)("li",{className:`${!0===e.isActive?b:f}`,onClick:()=>{n((0,g.SE)(e._id))},children:[(0,m.jsx)("img",{src:e.avatar,alt:"avatar",className:L}),(0,m.jsxs)("div",{className:A,children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:w,children:[(0,m.jsx)("span",{className:S,children:e.firstName}),(0,m.jsx)("span",{className:P,children:e.lastName})]}),e.messages.length>0&&i&&(0,m.jsxs)("p",{className:E,children:[null===(a=e.messages[e.messages.length-1])||void 0===a||null===(t=a.message)||void 0===t?void 0:t.slice(0,49),"\xa0..."]}),e.messages.length>0&&!i&&(0,m.jsx)("p",{className:E,children:e.messages[e.messages.length-1].message})]}),c&&d&&h&&(0,m.jsx)("div",{className:D,children:`${d} ${c}, ${h}`})]})]},e._id)})).reverse()}),(0,m.jsx)(W,{isOpen:a,onToggle:r})]})})},z="chatPage_containerChatPage__VYEwW",B="chatPage_left__-8i2O",Q="rightChatPage_right__+LXeE",G="rightChatPage_headerChat__r4M5+",H="rightChatPage_nameChat__pneiL",X="rightChatPage_updateChat__E5D5-",Z="rightChatPage_btnHeaderChat__wVKtf",J="rightChatPage_deleteIcon__faEzu",ee="rightChatPage_editIcon__Yz-DE",se="rightChatPage_img__f8dnU",ae="rightChatPage_firstName__POWmw",te="rightChatPage_listMessage__J2eZe",le="rightChatPage_messageCardLeft__+Tg2D",ie="rightChatPage_messageCardRight__TkGQx",ne="rightChatPage_messageDateWrapper__wKXg8",re="rightChatPage_messageLeft__vjMqc",ce="rightChatPage_messageRight__la60f",de="rightChatPage_dateLeft__MB8Ig",he="rightChatPage_dateRight__FoGFk",me="rightChatPage_formWrapper__CYxQY",oe="rightChatPage_form__tpf3B",_e="rightChatPage_input__sg1Ac",ge="rightChatPage_btn__9rX-5",Ne="rightChatPage_icon__R3YCY",xe="modalDeleteChat_modalDeleteChat__6Yvk6",je="modalDeleteChat_title__B5wqE",ue="modalDeleteChat_btnCard__D36dW",Ce="modalDeleteChat_btn__KHUvA",pe="modalDeleteChat_btnClose__-F+gQ",ve="modalDeleteChat_iconClose__x25iM";T().setAppElement("#root");const fe=e=>{let{id:s,isOpen:a,onToggle:t}=e;const l=(0,_.wA)();return(0,m.jsxs)(T(),{isOpen:a,onRequestClose:t,contentLabel:"Example Modal",className:xe,style:{overlay:{zIndex:1e3},content:{zIndex:1e3}},children:[(0,m.jsx)("div",{className:je,children:"Are you sure you want to delete this chat?"}),(0,m.jsxs)("div",{className:ue,children:[(0,m.jsx)("button",{className:Ce,onClick:()=>{l((0,g._e)(s)),t()},children:"Yes"}),(0,m.jsx)("button",{className:Ce,onClick:t,children:"No"}),(0,m.jsx)("button",{className:pe,children:(0,m.jsx)("svg",{width:20,height:20,className:ve,children:(0,m.jsx)("use",{href:`${K.A}#close-icon`})})})]})]})},be="modalEditChat_modalEditChat__qO48G",Ae="modalEditChat_inputCustom__-iAwT",we="modalEditChat_btnSubmit__R5Op8",Le="modalEditChat_label__FC-Pj",Se="modalEditChat_errMsg__VFWgr",Pe="modalEditChat_btnClose__GjRyx",Ee="modalEditChat_iconClose__3+bqD",De=/^(?!\s*$).+/,$e=V.Ik().shape({firstName:V.Yj().matches(De,"A space-only string!").min(2,"Too Short!").max(50,"Too Long!"),lastName:V.Yj().matches(De,"A space-only string!").min(2,"Too Short!").max(50,"Too Long!")});T().setAppElement("#root");const Te=e=>{let{id:s,isOpen:a,onToggle:t,chat:l}=e;const i=(0,_.wA)();return(0,m.jsx)(T(),{isOpen:a,onRequestClose:t,contentLabel:"Example Modal",className:be,children:(0,m.jsx)(q.l1,{initialValues:{firstName:l.firstName||"",lastName:l.lastName||""},validationSchema:$e,onSubmit:(e,a)=>{""!==e.firstName&&""===e.lastName&&i((0,g.vK)({id:s,firstName:e.firstName})),""===e.firstName&&""!==e.lastName&&i((0,g.vK)({id:s,lastName:e.lastName})),""!==e.firstName&&""!==e.lastName&&i((0,g.vK)({id:s,firstName:e.firstName,lastName:e.lastName})),t()},children:(0,m.jsxs)(q.lV,{children:[(0,m.jsxs)("label",{className:Le,children:[(0,m.jsx)(q.D0,{name:"firstName",placeholder:"firstName",className:Ae}),(0,m.jsx)(q.Kw,{component:"div",name:"firstName",className:Se})]}),(0,m.jsxs)("label",{className:Le,children:[(0,m.jsx)(q.D0,{name:"lastName",placeholder:"lastName",className:Ae}),(0,m.jsx)(q.Kw,{component:"div",name:"lastName",className:Se})]}),(0,m.jsx)("button",{type:"submit",className:we,children:"Edit chat"}),(0,m.jsx)("button",{className:Pe,onClick:t,children:(0,m.jsx)("svg",{className:Ee,width:20,height:20,children:(0,m.jsx)("use",{href:`${K.A}#close-icon`})})})]})})})},ke=()=>{const[e,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),i=()=>{s((e=>!e))},n=()=>{l((e=>!e))},r=(0,_.wA)(),{chats:c}=(0,h.A)(),d=c.find((e=>!0===e.isActive));return(0,m.jsx)(m.Fragment,{children:d&&(0,m.jsxs)("div",{className:Q,children:[(0,m.jsxs)("div",{className:G,children:[(0,m.jsxs)("div",{className:H,children:[(0,m.jsx)("img",{src:d.avatar,alt:"avatar",className:se}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:ae,children:d.firstName}),(0,m.jsx)("span",{children:d.lastName})]})]}),(0,m.jsxs)("div",{className:X,children:[(0,m.jsx)("button",{className:Z,onClick:i,children:(0,m.jsx)("svg",{width:20,height:20,className:ee,children:(0,m.jsx)("use",{href:`${K.A}#edit-icon`})})}),(0,m.jsx)("button",{className:Z,onClick:n,children:(0,m.jsx)("svg",{width:20,height:20,className:J,children:(0,m.jsx)("use",{href:`${K.A}#delete-icon`})})})]})]}),(0,m.jsx)("ul",{className:te,children:d.messages.map((e=>{let s;null!==e&&void 0!==e&&e.date&&(s=new Date(e.date));let a=null,t=null,l=null,i=null,n=null,r=null;s&&(a=s.getDate(),t=s.getMonth()+1,l=s.getFullYear(),i=s.getHours(),n=s.getMinutes(),r=s.getSeconds());const c=String(a).padStart(2,"0"),d=String(t).padStart(2,"0"),h=String(i).padStart(2,"0"),o=String(n).padStart(2,"0"),_=String(r).padStart(2,"0");return(0,m.jsxs)("li",{className:null!==e&&void 0!==e&&e.owner?le:ie,children:[(null===e||void 0===e?void 0:e.owner)&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:ne,children:[(0,m.jsx)("p",{className:re,children:e.message}),(0,m.jsx)("p",{className:de,children:`${c}/${d}/${l} ${h}:${o}:${_} AM`})]})}),!(null!==e&&void 0!==e&&e.owner)&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:ne,children:[(0,m.jsx)("p",{className:ce,children:e.message}),(0,m.jsx)("p",{className:he,children:`${c}/${d}/${l} ${h}:${o}:${_} AM`})]})})]},e._id)}))}),(0,m.jsx)(q.l1,{initialValues:{message:""},onSubmit:(e,s)=>{r((0,g.tj)({message:e.message,id:d._id})),s.resetForm()},children:(0,m.jsx)("div",{className:me,children:(0,m.jsxs)(q.lV,{className:oe,children:[(0,m.jsx)(q.D0,{name:"message",placeholder:"Type your message",className:_e}),(0,m.jsx)("button",{className:ge,children:(0,m.jsx)("svg",{width:25,height:25,className:Ne,children:(0,m.jsx)("use",{href:`${K.A}#arrow-icon`})})})]})})}),(0,m.jsx)(Te,{isOpen:e,onToggle:i,id:d._id,chat:{firstName:d.firstName,lastName:d.lastName}}),(0,m.jsx)(fe,{isOpen:a,onToggle:n,id:d._id})]})})};var Me=a(8614);const Re=(0,l.Ay)("https://test-task-backend-reenbit.onrender.com"),ye=()=>{const e=(0,_.wA)(),{chats:s}=(0,h.A)();return(0,t.useEffect)((()=>(Re.on("quoteResponse",(s=>{e((0,Me.V)(s))})),()=>{Re.off("quoteResponse")})),[e]),(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:z,children:[(0,m.jsxs)("div",{className:B,children:[(0,m.jsx)(N,{}),(null===s||void 0===s?void 0:s.length)>0&&(0,m.jsx)(U,{})]}),s.length>0&&(0,m.jsx)(ke,{})]})})}}}]);
//# sourceMappingURL=621.6226c791.chunk.js.map