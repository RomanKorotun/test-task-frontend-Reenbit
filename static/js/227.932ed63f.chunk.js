"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[227],{1581:(e,s,a)=>{a.d(s,{A:()=>t});a(5043);const t=a.p+"static/media/sprite.fa09150a10da6a862e5e910b58fb237b.svg"},3227:(e,s,a)=>{a.r(s),a.d(s,{default:()=>de});var t=a(5043),i=a(5749);const l="header_header__ys5bL",r="header_useContainer__lO6Ni",n="header_btnLogout__8iQeN",c="userMenu_userCard__UFlgo",h="userMenu_img__r+SKE";var d=a(1226),_=a(579);const m=()=>{const{avatar:e,username:s}=(0,d.A)();return(0,_.jsxs)("div",{className:c,children:[e&&(0,_.jsx)("img",{src:e,alt:"avatar",className:h}),(0,_.jsx)("div",{children:s})]})};var o=a(3003),g=a(7580);const x=()=>{const e=(0,o.wA)();return(0,_.jsx)("header",{className:l,children:(0,_.jsxs)("div",{className:r,children:[(0,_.jsx)(m,{}),(0,_.jsx)("button",{className:n,onClick:()=>e((0,g.ri)()),children:"Logout"})]})})},j="chatsList_chatListCard__EBKUx",N="chatsList_headerList__qwiUD",u="chatsList_btnAddChat__864Wh",v="chatsList_chatListTitle__T5mxL",C="chatsList_listItem__7xvFz",p="chatsList_listItemActive__eQBr3",f="chatsList_nameDateCard__mSxc0",A="chatsList_img__v9M8Q",L="chatsList_firstName__G6sCE",b="chatsList_lastName__VTRiR",w="chatsList_date__Wshoz";var P=a(2963),S=a.n(P);const $="modalAddChat_modalAddChat__1l6RB",T="modalAddChat_inputCustom__bznTs",k="modalAddChat_btnSubmit__qbJd3",F="modalAddChat_label__qAZFZ",M="modalAddChat_errMsg__i4liX",R="modalAddChat_btnClose__okvOL",q="modalAddChat_iconClose__PfN1E";var D=a(3892),E=a(1581),Y=a(899);const y=Y.Ik().shape({firstName:Y.Yj().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:Y.Yj().min(2,"Too Short!").max(50,"Too Long!").required("Required")});S().setAppElement("#root");const O=e=>{let{isOpen:s,onToggle:a}=e;const t=(0,o.wA)();return(0,_.jsx)(S(),{isOpen:s,onRequestClose:a,contentLabel:"Example Modal",className:$,children:(0,_.jsx)(D.l1,{initialValues:{firstName:"",lastName:""},validationSchema:y,onSubmit:(e,s)=>{t((0,g.S3)(e)),a()},children:(0,_.jsxs)(D.lV,{children:[(0,_.jsxs)("label",{className:F,children:[(0,_.jsx)(D.D0,{name:"firstName",placeholder:"firstName",className:T}),(0,_.jsx)(D.Kw,{component:"div",name:"firstName",className:M})]}),(0,_.jsxs)("label",{className:F,children:[(0,_.jsx)(D.D0,{name:"lastName",placeholder:"lastName",className:T}),(0,_.jsx)(D.Kw,{component:"div",name:"lastName",className:M})]}),(0,_.jsx)("button",{type:"submit",className:k,children:"Add chat"}),(0,_.jsx)("button",{className:R,onClick:a,children:(0,_.jsx)("svg",{className:q,width:20,height:20,children:(0,_.jsx)("use",{href:`${E.A}#close-icon`})})})]})})})},V=()=>{const[e,s]=(0,t.useState)(!1),{chats:a}=(0,d.A)(),i=(0,o.wA)(),l=()=>{s((e=>!e))};return(0,_.jsx)(_.Fragment,{children:a.length>0&&(0,_.jsxs)("div",{className:j,children:[(0,_.jsxs)("div",{className:N,children:[(0,_.jsx)("div",{className:v,children:"Chats"}),(0,_.jsx)("button",{className:u,onClick:l,children:"Add new chat"})]}),(0,_.jsx)("ul",{children:a.map((e=>{const s=e.messages[e.messages.length-1];let a=null,t=null,l=null;if(null!==s&&void 0!==s&&s.date){const e=new Date(s.date);a=e.getDate(),t=e.toLocaleString("en-US",{month:"short"}),l=e.getFullYear()}return(0,_.jsxs)("li",{className:`${!0===e.isActive?p:C}`,onClick:()=>{i((0,g.SE)(e._id))},children:[(0,_.jsx)("img",{src:e.avatar,alt:"avatar",className:A}),(0,_.jsxs)("div",{className:f,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{className:L,children:e.firstName}),(0,_.jsx)("span",{className:b,children:e.lastName})]}),a&&t&&l&&(0,_.jsx)("div",{className:w,children:`${t} ${a}, ${l}`})]})]},e._id)})).reverse()}),(0,_.jsx)(O,{isOpen:e,onToggle:l})]})})},W="chatPage_containerChatPage__VYEwW",B="chatPage_left__-8i2O",K="rightChatPage_right__+LXeE",Q="rightChatPage_nameChat__pneiL",U="rightChatPage_img__f8dnU",I="rightChatPage_firstName__POWmw",X="rightChatPage_listMessage__J2eZe",z="rightChatPage_messageCardLeft__+Tg2D",G="rightChatPage_messageCardRight__TkGQx",Z="rightChatPage_messageDateWrapper__wKXg8",J="rightChatPage_messageLeft__vjMqc",H="rightChatPage_messageRight__la60f",ee="rightChatPage_dateLeft__MB8Ig",se="rightChatPage_dateRight__FoGFk",ae="rightChatPage_formWrapper__CYxQY",te="rightChatPage_form__tpf3B",ie="rightChatPage_input__sg1Ac",le="rightChatPage_btn__9rX-5",re="rightChatPage_icon__R3YCY",ne=()=>{const e=(0,o.wA)(),{chats:s}=(0,d.A)(),a=s.find((e=>!0===e.isActive));return(0,_.jsx)(_.Fragment,{children:a&&(0,_.jsxs)("div",{className:K,children:[(0,_.jsxs)("div",{className:Q,children:[(0,_.jsx)("img",{src:a.avatar,alt:"avatar",className:U}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{className:I,children:a.firstName}),(0,_.jsx)("span",{children:a.lastName})]})]}),(0,_.jsx)("ul",{className:X,children:a.messages.map((e=>{const s=new Date(e.date),a=s.getDate(),t=s.getMonth()+1,i=s.getFullYear(),l=s.getHours(),r=s.getMinutes(),n=s.getSeconds(),c=String(l).padStart(2,"0"),h=String(r).padStart(2,"0"),d=String(n).padStart(2,"0");return(0,_.jsxs)("li",{className:null!==e&&void 0!==e&&e.owner?z:G,children:[(null===e||void 0===e?void 0:e.owner)&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:Z,children:[(0,_.jsx)("p",{className:J,children:e.message}),(0,_.jsx)("p",{className:ee,children:`${t}/${a}/${i} ${c}:${h}:${d} AM`})]})}),!(null!==e&&void 0!==e&&e.owner)&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:Z,children:[(0,_.jsx)("p",{className:H,children:e.message}),(0,_.jsx)("p",{className:se,children:`${t}/${a}/${i} ${c}:${h}:${d} AM`})]})})]},e._id)}))}),(0,_.jsx)(D.l1,{initialValues:{message:""},onSubmit:(s,t)=>{e((0,g.tj)({message:s.message,id:a._id})),t.resetForm()},children:(0,_.jsx)("div",{className:ae,children:(0,_.jsxs)(D.lV,{className:te,children:[(0,_.jsx)(D.D0,{name:"message",placeholder:"Type your message",className:ie}),(0,_.jsx)("button",{className:le,children:(0,_.jsx)("svg",{width:25,height:25,className:re,children:(0,_.jsx)("use",{href:`${E.A}#arrow-icon`})})})]})})})]})})};var ce=a(8614);const he=(0,i.Ay)("http://localhost:3030");console.log(he);const de=()=>{const e=(0,o.wA)(),{chats:s}=(0,d.A)();return(0,t.useEffect)((()=>(he.on("quoteResponse",(s=>{e((0,ce.V)(s))})),()=>{he.off("quoteResponse")})),[e]),(0,_.jsx)("div",{children:(0,_.jsxs)("div",{className:W,children:[(0,_.jsxs)("div",{className:B,children:[(0,_.jsx)(x,{}),(null===s||void 0===s?void 0:s.length)>0&&(0,_.jsx)(V,{})]}),s.length>0&&(0,_.jsx)(ne,{})]})})}}}]);
//# sourceMappingURL=227.932ed63f.chunk.js.map